const qureyString=window.location.search,urlParam=new URLSearchParams(qureyString),id=urlParam.get("id");function createPage(e){const t=document.getElementById("productImage"),n=document.createElement("div"),a=e.imageUrl;t.classList.add("container-fluid","p-0","col-xl-6"),t.innerHTML+='<img src="'+a+'" alt="Teddy Bear" class="img-fluid" style="height:100%; width:100%; object-fit:cover;">',t.appendChild(n);const l=document.getElementById("productCard"),o=document.createElement("div"),d=e.name,c=e.description,r=e.price;o.classList.add("mx-auto"),l.classList.add("col-xl-6","p-0"),o.innerHTML+='<h1 class="mx-auto shop-item-title w-auto">'+d+"</h1>",o.innerHTML+='<p class="lead mx-auto w-auto">'+c+"</p>",o.innerHTML+='<p class="lead mx-auto font-weight-bolder">$'+r/100+"</p>";const s=document.createElement("form"),i=document.createElement("label"),m=document.createElement("select");s.classList.add("my-4"),m.classList.add("btn","btn-secondary","dropdown-toggle","w-auto"),i.classList.add("font-weight-bold"),i.innerHTML="Choose your color&#58; &nbsp;";const u=document.createElement("form"),p=document.createElement("label"),h=document.createElement("select");u.classList.add("my-4"),h.classList.add("btn","btn-secondary","dropdown-toggle","w-auto"),p.classList.add("font-weight-bold"),p.innerHTML="Quantity&#58; &nbsp;";for(let t in e.colors){const n=document.createElement("option");n.innerHTML=e.colors[t],n.setAttribute("value",e.colors[t]),m.appendChild(n)}const g=[1,2,3,4,5,6,7,8,9,10];for(let e in g){const t=document.createElement("option");t.innerHTML=g[e],t.setAttribute("value",g[e]),h.appendChild(t)}u.appendChild(p),u.appendChild(h),s.appendChild(i),s.appendChild(m);const L=document.createElement("button"),C=document.createElement("div");L.setAttribute("type","submit"),L.classList.add("btn","btn-primary","add-to-cart","rounded","w-75","align-self-center","my-5"),L.textContent="Add to Cart",L.addEventListener("click",()=>{let t=[];const n=localStorage.getItem("cart");t=null===n?[]:JSON.parse(n);let a={imageUrl:e.imageUrl,name:e.name,id:e._id,price:e.price,selectColors:m.value,quantity:parseInt(h.value)};t.push(a),localStorage.setItem("cart",JSON.stringify(t)),addNumCart()}),L.onclick=(()=>{C.classList.add("alert","alert-success","p-1","m-0","text-center","w-75","align-self-center"),C.setAttribute("role","alert"),C.textContent=h.value+" "+e.name+" with "+m.value+" Color added to cart!"}),l.appendChild(o),l.appendChild(s),l.appendChild(u),l.appendChild(L),l.appendChild(C)}function addNumCart(){const e=localStorage.getItem("cart");if(e){let t=JSON.parse(e);document.querySelector(".cartItemsTotal").innerHTML=t.length}}fetch("http://localhost:3000/api/teddies/"+id).then(function(e){return e.json()}).then(function(e){createPage(e)}).catch(function(e){console.log(e),document.getElementById("productImageRow").innerHTML='<h2 class = "mx-auto mt-5 text-center"> We\'re sorry the server is unavailable</h2>'}),addNumCart();