const qureyString=window.location.search,urlParam=new URLSearchParams(qureyString),id=urlParam.get("id");function createPage(e){const t=document.getElementById("productImage"),a=document.createElement("div"),n=e.imageUrl;t.classList.add("container-fluid","p-0","col-xl-6"),t.innerHTML+='<img src="'+n+'" alt="Teddy Bear" class="img-fluid" style="height:100%; width:100%; object-fit:cover;">',t.appendChild(a);const o=document.getElementById("productCard"),c=document.createElement("div"),l=e.name,r=e.description,d=e.price;c.classList.add("mx-auto"),o.classList.add("col-xl-6","p-0"),c.innerHTML+='<h1 class="mx-auto shop-item-title w-auto">'+l+"</h1>",c.innerHTML+='<p class="lead mx-auto w-auto">'+r+"</p>",c.innerHTML+='<p class="lead mx-auto font-weight-bolder">$'+d/100+"</p>";const i=document.createElement("form"),s=document.createElement("label"),m=document.createElement("select");i.classList.add("my-4"),m.classList.add("btn","btn-secondary","dropdown-toggle","w-auto"),s.classList.add("font-weight-bold"),s.innerHTML="Choose your color&#58; &nbsp;";for(let t in e.colors){const a=document.createElement("option");a.innerHTML=e.colors[t],a.setAttribute("value",e.colors[t]),m.appendChild(a)}i.appendChild(s),i.appendChild(m);const u=document.createElement("button"),p=document.createElement("div");u.setAttribute("type","submit"),u.classList.add("btn","btn-primary","add-to-cart","rounded","w-75","align-self-center","my-5"),u.textContent="Add to Cart",u.addEventListener("click",()=>{let t=[];const a=localStorage.getItem("cart");t=null===a?[]:JSON.parse(a);let n={imageUrl:e.imageUrl,name:e.name,id:e._id,price:e.price,selectColors:m.value,quantity:1};t.push(n),localStorage.setItem("cart",JSON.stringify(t)),addNumCart()}),u.onclick=(()=>{p.classList.add("alert","alert-success","p-1","m-0","text-center","w-75","align-self-center"),p.setAttribute("role","alert"),p.textContent=e.name+" with "+m.value+" Color added to cart!"}),o.appendChild(c),o.appendChild(i),o.appendChild(u),o.appendChild(p)}function addNumCart(){const e=localStorage.getItem("cart");if(e){let t=JSON.parse(e);document.querySelector(".cartItemsTotal").innerHTML=t.length}}fetch("http://localhost:3000/api/teddies/"+id).then(function(e){return e.json()}).then(function(e){createPage(e)}).catch(function(e){console.log(e),document.getElementById("productImageRow").innerHTML='<h2 class = "mx-auto mt-5 text-center"> We\'re sorry the server is unavailable</h2>'}),addNumCart();